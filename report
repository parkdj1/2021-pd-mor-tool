#!/usr/bin/env ruby

require './pagerduty_incidents'
require "optparse"

options = {}
optparse = OptionParser.new do |opts|
  opts.banner = <<-EOS
  These options are for ...

EOS
  opts.on("--month=MONTH", "-m=MONTH") {|m| options[:month] = m}
  opts.on("--year=YEAR", "-y=YEAR") {|y| options[:year] = y}
end
optparse.parse!

if options[:month]
  year = options[:year] || ""
  responses = PagerdutyIncidents.new(options[:month],year)
else
  responses = PagerdutyIncidents.new()
end
puts "exporting data\n"
responses.get_data() 
puts "export complete"

